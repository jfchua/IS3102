
<div ng-cloak ng-controller="updateEController as updateECtrl">
	<div class="clearfix">
		<ol class="breadcrumb no-bg no-m-t">
			<li class="active"><i class="glyphicon glyphicon-dashboard"></i></li>
			<li><a ui-sref="dashboard.workspace">Workspace</a></li>
			<li><a ui-sref="dashboard.viewAllEventsEx">View Events</a></li>

			<li><a>Update Events</a></li>
		</ol>
	</div>

	<div class="col-md-9">
		<div class="panel panel-primary">

			<div class="panel-heading">
				<h3 class="panel-title">
					Update Event
					<div class="panel-control pull-right">
						<a class="panelButton"><i class="fa fa-refresh"></i></a> <a
							class="panelButton"><i class="fa fa-minus"></i></a> <a
							class="panelButton"><i class="fa fa-remove"></i></a>
					</div>
				</h3>
			</div>
			<div class="panel-body">
				<form>
					<div class="form-group">
						<label for="exampleInput">Event Title</label> <input type="text"
							ng-model="event.event_title" class="form-control underline"
							placeholder="Enter event title">
					</div>
					<div class="form-group">
						<label for="exampleInput">Units Selected Previously</label>
						<button ng-click="resetBookings()">Reset to last booking</button>
						<div class="form-group">
							<ul class="list-group" name="units">
								<li ng-repeat="selectedBookingsUnit in selectedBookingsUnits"
									class="list-group-item">{{selectedBookingsUnit.unitNumber}}
									<button ng-click="deleteBookingUnit(selectedBookingsUnit)">
										<i class="glyphicon glyphicon-trash"></i>
									</button>
								</li>
							</ul>
						</div>
						<!--  <div ng-mouseover="checkAvail()">
							<p>
								Put mouse over to check Availability<br> Available?
								{{avail}}
							</p>
						</div>-->
					</div>
					<p>
						Want to change unit(s)?: <input type="checkbox" ng-model="myVar">
					</p>
					<div ng-show="myVar">
						<div class="form-group">
						<label for="building" class="control-label">Select
							Building</label> <select name="building"
							ng-model="currentlySelectedBuilding"
							ng-options="x.id as x.name for x in buildings"
							ng-change="getLevel(currentlySelectedBuilding)"
							class="form-control underline">
						</select>
					</div>
						<div class="form-group">
						<label for="level" class="control-label">Select Level</label> <select
							name="level" ng-model="currentlySelectedLevel"
							ng-options="x.id as x.levelNum for x in levels"
							ng-change="getUnit(currentlySelectedLevel)"
							class="form-control underline">
						</select>
					</div>

						<div class="form-group">
						<label for="unit" class="control-label">Select Unit</label> <select
							name="unit" ng-model="currentlySelectedUnit"
							ng-options="x as x.unitNumber for x in units| filter: { rentable : true }"
							ng-change="selectUnit(); checkRent(); checkAvail()" class="form-control underline">
						</select>
					</div>

					</div>
					<div>
						<p>TOTAL RENT before GST(SGD): {{totalRent | currency}}</p>
						<p>TOTAL RENT after GST(SGD): {{totalRentAfter | currency}}</p>
						<table class="table table-hover">              
                        <thead>
                           <tr>
                            <th><i></i> S/N </th>
                           <th><i></i> Unit ID </th>
                           <th><i></i> Basic Hourly Rent (Before GST)</th>
                           <th><i></i> Special Rate (x)</th>
                            <th><i></i> Number Of Hours </th>
                            <th><i></i> Rental Before GST </th>
                          </tr>
                           </thead>
                         <tbody>
                         <tr ng-repeat="x in components | orderObjectBy:order_item:order_reverse">
                            <td>{{ x.num }}</td>
                            <td>{{ x.id }}</td>
                            <td>{{ x.base }}</td>
                            <td>{{ x.rate }}</td>
                            <td>{{ x.hour }}</td>
                            <td>{{ x.rental }}</td>
                        </tr>
                         </tbody>                       
                    </table>		
					</div>
					<div class="form-group">
						Select an event type: <select ng-model="eventType"
							ng-options="x.eventType as x.name for x in eventTypes">
						</select>
					</div>
					<div class="form-group">
						<label for="exampleInput">Event Description</label> <input
							type="text" ng-model="event.event_description"
							class="form-control underline"
							placeholder="Enter event description">
					</div>
					<div class="form-group">
						<label for="exampleInput">Event Start Date</label> <input
							type="datetime-local" ng-model="event.event_start_date"
							class="form-control" placeholder="Enter start date">
					</div>
					<div class="form-group">
						<label for="exampleInput">Event End Date</label> <input
							type="datetime-local" ng-model="event.event_end_date"
							class="form-control" placeholder="Enter end date">
					</div>
					<!--    <div class="form-group">
               <label for="exampleInputFile">File input</label>
               <input type="file" ng-model="building.filePath" id="exampleInputFile">
               <p class="help-block">Please select a file</p>
      </div> -->

					<button class="progress-button primary-progress"
						data-style="shrink" data-horizontal ng-click="updateEvent()">Submit</button>
					&nbsp;
					<!--   <button ng-click = "updateBuilding()"><input type="submit" value="Submit"></button>-->
				</form>
			</div>
		</div>
	</div>
</div>